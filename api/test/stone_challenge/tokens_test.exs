defmodule StoneChallenge.TokensTest do
  use StoneChallenge.DataCase, async: true

  alias StoneChallenge.Accounts
  alias StoneChallenge.Tokens
  require Logger

  describe "register_token/2" do
    @valid_token "SFMyNTY.g2gDdAAAAA5kAAhfX21ldGFfX3QAAAAGZAAKX19zdHJ1Y3RfX2QAG0VsaXhpci5FY3RvLlNjaGVtYS5NZXRhZGF0YWQAB2NvbnRleHRkAANuaWxkAAZwcmVmaXhkAANuaWxkAAZzY2hlbWFkACNFbGl4aXIuU3RvbmVDaGFsbGVuZ2UuQWNjb3VudHMuVXNlcmQABnNvdXJjZW0AAAAFdXNlcnNkAAVzdGF0ZWQABmxvYWRlZGQACl9fc3RydWN0X19kACNFbGl4aXIuU3RvbmVDaGFsbGVuZ2UuQWNjb3VudHMuVXNlcmQACGFjY291bnRzdAAAAAhkAAhfX21ldGFfX3QAAAAGZAAKX19zdHJ1Y3RfX2QAG0VsaXhpci5FY3RvLlNjaGVtYS5NZXRhZGF0YWQAB2NvbnRleHRkAANuaWxkAAZwcmVmaXhkAANuaWxkAAZzY2hlbWFkACZFbGl4aXIuU3RvbmVDaGFsbGVuZ2UuQWNjb3VudHMuQWNjb3VudGQABnNvdXJjZW0AAAAIYWNjb3VudHNkAAVzdGF0ZWQABmxvYWRlZGQACl9fc3RydWN0X19kACZFbGl4aXIuU3RvbmVDaGFsbGVuZ2UuQWNjb3VudHMuQWNjb3VudGQAB2JhbGFuY2V0AAAABGQACl9fc3RydWN0X19kAA5FbGl4aXIuRGVjaW1hbGQABGNvZWZiAAGGoGQAA2V4cGL____-ZAAEc2lnbmEBZAACaWRtAAAAJDQ0YjQ4YjI4LWE3MzYtNDkwZC1hNzNjLTNjMTU2ZTIwY2ZiNGQAC2luc2VydGVkX2F0dAAAAAlkAApfX3N0cnVjdF9fZAAURWxpeGlyLk5haXZlRGF0ZVRpbWVkAAhjYWxlbmRhcmQAE0VsaXhpci5DYWxlbmRhci5JU09kAANkYXlhDmQABGhvdXJhEGQAC21pY3Jvc2Vjb25kaAJhAGEAZAAGbWludXRlYRNkAAVtb250aGEKZAAGc2Vjb25kYTdkAAR5ZWFyYgAAB-RkAAp1cGRhdGVkX2F0dAAAAAlkAApfX3N0cnVjdF9fZAAURWxpeGlyLk5haXZlRGF0ZVRpbWVkAAhjYWxlbmRhcmQAE0VsaXhpci5DYWxlbmRhci5JU09kAANkYXlhDmQABGhvdXJhEGQAC21pY3Jvc2Vjb25kaAJhAGEAZAAGbWludXRlYRNkAAVtb250aGEKZAAGc2Vjb25kYTdkAAR5ZWFyYgAAB-RkAAR1c2VydAAAAARkAA9fX2NhcmRpbmFsaXR5X19kAANvbmVkAAlfX2ZpZWxkX19kAAR1c2VyZAAJX19vd25lcl9fZAAmRWxpeGlyLlN0b25lQ2hhbGxlbmdlLkFjY291bnRzLkFjY291bnRkAApfX3N0cnVjdF9fZAAhRWxpeGlyLkVjdG8uQXNzb2NpYXRpb24uTm90TG9hZGVkZAAHdXNlcl9pZG0AAAAkNDU4MDg0ZjMtM2IzYS00MzBlLWE2ZmItNzc0ZmMyYzA2NWI3ZAALYXV0aF90b2tlbnN0AAAABGQAD19fY2FyZGluYWxpdHlfX2QABG1hbnlkAAlfX2ZpZWxkX19kAAthdXRoX3Rva2Vuc2QACV9fb3duZXJfX2QAI0VsaXhpci5TdG9uZUNoYWxsZW5nZS5BY2NvdW50cy5Vc2VyZAAKX19zdHJ1Y3RfX2QAIUVsaXhpci5FY3RvLkFzc29jaWF0aW9uLk5vdExvYWRlZGQABWVtYWlsbQAAABNjdXN0b21lcjJAZ21haWwuY29tZAAKZmlyc3RfbmFtZW0AAAAJQ3VzdG9tZXIyZAACaWRtAAAAJDQ1ODA4NGYzLTNiM2EtNDMwZS1hNmZiLTc3NGZjMmMwNjViN2QAC2luc2VydGVkX2F0dAAAAAlkAApfX3N0cnVjdF9fZAAURWxpeGlyLk5haXZlRGF0ZVRpbWVkAAhjYWxlbmRhcmQAE0VsaXhpci5DYWxlbmRhci5JU09kAANkYXlhDmQABGhvdXJhEGQAC21pY3Jvc2Vjb25kaAJhAGEAZAAGbWludXRlYRNkAAVtb250aGEKZAAGc2Vjb25kYTdkAAR5ZWFyYgAAB-RkAAlsYXN0X25hbWVtAAAACUN1c3RvbWVyMmQACHBhc3N3b3JkZAADbmlsZAAVcGFzc3dvcmRfY29uZmlybWF0aW9uZAADbmlsZAANcGFzc3dvcmRfaGFzaG0AAACDJHBia2RmMi1zaGE1MTIkMTYwMDAwJENvMWk1S0FZQzcxNHZXelYyc0tEUHckSGJ0aXlzWTZiWnpFaC9ONFFPbTBwMVU1bEtOb0duUlNYLkxiS2lnbnFMUEtzR2NPWUo2WGFWM2VyZTRtTHJnNG92RlJLVW9PMVZ0dTVyL1VQR1ZTVXdkAARyb2xlbQAAAAhjdXN0b21lcmQACnVwZGF0ZWRfYXR0AAAACWQACl9fc3RydWN0X19kABRFbGl4aXIuTmFpdmVEYXRlVGltZWQACGNhbGVuZGFyZAATRWxpeGlyLkNhbGVuZGFyLklTT2QAA2RheWEOZAAEaG91cmEQZAALbWljcm9zZWNvbmRoAmEAYQBkAAZtaW51dGVhE2QABW1vbnRoYQpkAAZzZWNvbmRhN2QABHllYXJiAAAH5G4GAMKTFih1AWIAAVGA.hqvEHfNgisk5tr7Ctvu6BH42oHya1UkYitcC1UBwJZ8"
    @invalid_token ""
    @pass "123456"

    setup do
      {:ok, user: user_fixture(password: @pass)}
    end

    test "testing token registration with valid data", %{user: user} do
      {:ok, token} = Tokens.register_token(user, @valid_token)
      assert token.token == @valid_token
    end
  end
end
